<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram name="Error Handling Flow" id="error-flow">
    <mxGraphModel dx="1550" dy="1183" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="RPAS Data Loader - Error Handling and Decision Flow" style="text;html=1;align=center;verticalAlign=middle;fontSize=24;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>
        <mxCell id="start" value="START - User Uploads File" style="ellipse;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="80" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="widget-val" value="Widget Client-Side Validation" style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="180" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-start-widget" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#82b366" parent="1" source="start" target="widget-val" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="decision-widget" value="Valid?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="270" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-widget-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6c8ebf" parent="1" source="widget-val" target="decision-widget" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-widget" value="Display Error to User" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="400" y="270" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-widget-error" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-widget" target="error-widget" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gp-upload" value="Upload File to GP Service" style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12" parent="1" vertex="1">
          <mxGeometry x="700" y="390" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-decision-gp" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-widget" target="gp-upload" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="decision-gp" value="Upload Success?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="480" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-gp-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#82b366" parent="1" source="gp-upload" target="decision-gp" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-gp" value="GP Service Error" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="400" y="480" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-gp-error" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-gp" target="error-gp" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jenkins-trigger" value="Trigger Jenkins API" style="rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="600" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-gp-jenkins" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-gp" target="jenkins-trigger" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="widget-done" value="Widget Shows Processing Initiated" style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="690" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="arrow-jenkins-done" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#d79b00" parent="1" source="jenkins-trigger" target="widget-done" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="python-section" value="PYTHON PREPROCESSING" style="text;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;rounded=1" parent="1" vertex="1">
          <mxGeometry x="700" y="800" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="python-val" value="Python: Validate LAS File" style="rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12" parent="1" vertex="1">
          <mxGeometry x="700" y="870" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-section-python" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#9673a6" parent="1" source="python-section" target="python-val" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="decision-python-val" value="File Valid?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="960" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-python-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#9673a6" parent="1" source="python-val" target="decision-python-val" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-python-val" value="QUARANTINE - Move file and email user" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="950" y="960" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-python-quarantine" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-python-val" target="error-python-val" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="python-process" value="Process LAS to TERRAIN" style="rounded=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="1080" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-val-process" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-python-val" target="python-process" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="decision-python-process" value="Processing Success?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="1170" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-process-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#9673a6" parent="1" source="python-process" target="decision-python-process" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-python-process" value="QUARANTINE - Processing failed" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="950" y="1170" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-process-error" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-python-process" target="error-python-process" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fme-webhook" value="Trigger FME Flow Webhook" style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="1290" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="arrow-process-webhook" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-python-process" target="fme-webhook" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="decision-webhook" value="Webhook Success?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="1380" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-webhook-decision" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6c8ebf" parent="1" source="fme-webhook" target="decision-webhook" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-webhook" value="Webhook Failed - Email user and admin" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="400" y="1380" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-webhook-error" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-webhook" target="error-webhook" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="python-success" value="Python Success - &#xa;TERRAIN created and &#xa;FME Flow triggered" style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="1500" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-webhook-success" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-webhook" target="python-success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fme-section" value="FME FLOW PROCESSING" style="text;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;rounded=1" parent="1" vertex="1">
          <mxGeometry x="700" y="1620" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="arrow-python-fme" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#82b366" parent="1" source="python-success" target="fme-section" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-fme-upload" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6c8ebf;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="fme-section" target="decision-fme" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="1690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="decision-fme" value="FME Success?" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="720" y="1730" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="error-fme" value="FME Processing Error - Email user" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="950" y="1830" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-fme-error" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#CC0000;fontSize=12;fontStyle=1" parent="1" source="decision-fme" target="error-fme" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fme-ingest" value="INGEST Stage - Publish to MTD/CER" style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="700" y="1950" width="200" height="45" as="geometry" />
        </mxCell>
        <mxCell id="arrow-decision-ingest" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#00CC00;fontSize=12;fontStyle=1" parent="1" source="decision-fme" target="fme-ingest" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="success" value="SUCCESS - Data Published" style="ellipse;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="675" y="2040" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="arrow-ingest-success" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=3;strokeColor=#82b366" parent="1" source="fme-ingest" target="success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vagVo450ftVNJ0WDT_g0-1" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="50" y="410" width="190" height="250" as="geometry" />
        </mxCell>
        <mxCell id="legend-box" value="LEGEND" style="rounded=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;verticalAlign=top" parent="vagVo450ftVNJ0WDT_g0-1" vertex="1">
          <mxGeometry width="190" height="250" as="geometry" />
        </mxCell>
        <mxCell id="legend-success" value="Success Path" style="rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11" parent="vagVo450ftVNJ0WDT_g0-1" vertex="1">
          <mxGeometry x="13.57142857142857" y="50" width="162.85714285714286" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-error" value="Error or Failure" style="rounded=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11" parent="vagVo450ftVNJ0WDT_g0-1" vertex="1">
          <mxGeometry x="13.57142857142857" y="90" width="162.85714285714286" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-decision" value="Decision Point" style="rhombus;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11" parent="vagVo450ftVNJ0WDT_g0-1" vertex="1">
          <mxGeometry x="47.5" y="130" width="95" height="50" as="geometry" />
        </mxCell>
        <mxCell id="legend-process" value="Processing Step" style="rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11" parent="vagVo450ftVNJ0WDT_g0-1" vertex="1">
          <mxGeometry x="13.57142857142857" y="190" width="162.85714285714286" height="30" as="geometry" />
        </mxCell>
        <mxCell id="vagVo450ftVNJ0WDT_g0-2" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="40" y="130" width="230" height="250" as="geometry" />
        </mxCell>
        <mxCell id="summary-box" value="ERROR HANDLING SUMMARY" style="rounded=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;verticalAlign=top" parent="vagVo450ftVNJ0WDT_g0-2" vertex="1">
          <mxGeometry width="230" height="250" as="geometry" />
        </mxCell>
        <mxCell id="summary-points" value="ERROR POINTS:&amp;nbsp;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;1. Widget Validation&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;2. GP Service Upload&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;3. Python Validation&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;4. Python Processing&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;5. Webhook Trigger&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&amp;nbsp;6. FME Flow Processing&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;fontSize=15;" parent="vagVo450ftVNJ0WDT_g0-2" vertex="1">
          <mxGeometry x="16.428571428571427" y="50" width="197.14285714285714" height="170" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
